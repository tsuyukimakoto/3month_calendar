# Proposal: 3-Month Calendar macOS Widget

## Summary
macOSのウィジェットとして「前月・当月・次月の3ヶ月表示」カレンダーを提供する。表示開始曜日・祝日や曜日の色・月名/曜日名の表記・レイアウト・クリック時の挙動などを設定可能にし、祝日情報は公開Google Calendarから年単位で取得・キャッシュする。

## Goals
- 3ヶ月（前月・当月・次月）のコンパクトなカレンダー表示
- 日曜始まり/月曜始まりの切替
- 祝日・曜日色のカスタマイズ
- 月名/曜日名の英語表記（フル/略称の適切な使い分け）
- 祝日カレンダーの年単位取得＆ローカルキャッシュ
- 複数のレイアウト（横並び、当月強調など）
- クリック時の挙動（Calendarアプリ、Google Calendar、何もしない）

## Non-goals
- イベントの作成・編集機能
- 複数タイムゾーンや多言語対応（英語表記のみ）
- 祝日以外の外部カレンダー同期

## User Stories
- ユーザーとして、日曜始まり/月曜始まりを選んで慣れた表示にしたい
- ユーザーとして、祝日を目立つ色で表示したい
- ユーザーとして、横2列幅に収まる見やすい3ヶ月カレンダーを置きたい
- ユーザーとして、ウィジェットクリックで好みのアプリ/URLに移動したい

## Requirements
### Display
- 3ヶ月分（前月・当月・次月）を常時表示
- 曜日ヘッダは英語表記
  - 狭い領域では略称（e.g., Mon）
  - 余裕がある領域では正式名称（e.g., Monday）
- 月名は英語表記
  - 当月は正式名称、前月/次月は略称などのバリエーション対応

### Layout
- 横2列幅を想定
- レイアウトプリセットを複数用意
  - 横一列並び（均等）
  - 当月を大きめ、前月/次月を小さめ
  - 2段構成（当月＋前月/次月）

### Settings
- 週の開始曜日: `Sunday` / `Monday`
- 曜日ごとの色設定（週末、平日、特定曜日）
- 祝日の色設定
- クリック時の挙動:
  - Calendarアプリを開く
  - 既定ブラウザで `calendar.google.com` を開く
  - 何もしない

### Holidays
- 公開Google Calendarから祝日データを取得
- 取得タイミング:
  - 月初の起動時に次年分まで取得
  - 毎回の起動では取得しない（キャッシュ優先）
- 取得失敗時は既存キャッシュを使用

## Data & Caching
- 祝日データはローカルに年単位で保存
- キャッシュの有効期限を月単位で管理
- 取得先カレンダーIDは設定可能（デフォルトは日本の祝日カレンダーを想定）

## UX / Visual Direction
- 余白と行間を抑えたコンパクト設計
- 当月の枠・背景・フォントウェイトで視認性を上げる
- 祝日はカラーで強調、週末は淡い色分け

## Open Questions
- レイアウトのプリセット数と初期値はどれが良いか
- 祝日カレンダーのデフォルトID（日本固定か、ユーザー指定のみか）
- クリック時のCalendarアプリ起動は新規ウィンドウか既存か

## Risks
- 公開Google Calendarの取得制限・ID変更
- ウィジェットサイズ制約による可読性低下
- 祝日取得の失敗時に見た目が欠けるリスク

## Milestones (Draft)
1. 3ヶ月表示の基本UI＋レイアウト1種
2. 設定項目（週開始/色/クリック挙動）追加
3. 祝日取得・キャッシュ実装
4. レイアウトプリセット拡充
